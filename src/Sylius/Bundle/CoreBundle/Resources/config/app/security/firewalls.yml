# This file is part of the Sylius package.
# (c) Paweł Jędrzejewski

security:
    firewalls:
        admin:
            switch_user: true
            context: user
            pattern: /admin/.*

            form_login:
                provider: sylius_user_provider
                login_path: sylius_admin_login
                check_path: sylius_admin_login_check
                failure_path: sylius_admin_login
                default_target_path: sylius_admin_dashboard
                use_forward: false
                use_referer: true

            logout:
                path: sylius_admin_logout
                target: sylius_admin_login

            anonymous: true

        administration:
            switch_user: true
            context: user
            pattern: /administration/.*

            form_login:
                provider: sylius_user_provider
                login_path: /administration/login
                check_path: /administration/login-check
                failure_path: /administration/login
                default_target_path: /administration/dashboard
                use_forward: false
                use_referer: true

            logout:
                path: /logout
                target: /administration/login

            anonymous: true

        api:
            pattern: ^/api
            fos_oauth: true
            stateless: true
            anonymous: true

        main:
            switch_user: { role: ROLE_ALLOWED_TO_SWITCH }
            context: user
            pattern: /.*

            form_login:
                provider: sylius_user_provider
                login_path: /login
                check_path: /login_check
                failure_path: /login
                default_target_path: /
                use_forward: false
                use_referer: true

            remember_me:
                key: %sylius.secret%
                name: APP_REMEMBER_ME
                lifetime: 31536000
                always_remember_me: true
                remember_me_parameter: _remember_me

            oauth:
                resource_owners:
                    amazon: "/connect-login/check-amazon"
                    facebook: "/connect-login/check-facebook"
                    google: "/connect-login/check-google"
                login_path: /login
                failure_path: /login
                oauth_user_provider:
                    service: sylius.oauth.user_provider

            logout: true
            anonymous: true

        oauth_token:
            pattern: ^/oauth/v2/token
            security: false

        dev:
            pattern: ^/(_(profiler|wdt)|css|images|js)/
            security: false
