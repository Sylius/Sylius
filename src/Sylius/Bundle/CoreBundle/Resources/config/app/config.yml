# This file is part of the Sylius package.
# (c) Paweł Jędrzejewski

imports:
    - { resource: "@SyliusAddressingBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusAttributeBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusChannelBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusContentBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusCurrencyBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusCustomerBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusInventoryBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusLocaleBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusOrderBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusPaymentBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusProductBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusPromotionBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusShippingBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusTaxationBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusTaxonomyBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusUserBundle/Resources/config/app/config.yml" }
    - { resource: "@SyliusVariationBundle/Resources/config/app/config.yml" }

    - { resource: "parameters.yml" }
    - { resource: "sylius.yml" }
    - { resource: "state_machine.yml" }
    - { resource: "fixtures.yml" }

doctrine:
    orm:
        auto_generate_proxy_classes: "%kernel.debug%"
        entity_managers:
            default:
                auto_mapping: true
                mappings:
                    gedmo_loggable:
                        type: annotation
                        prefix: Gedmo\Loggable\Entity
                        dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Loggable/Entity"
                        is_bundle: false

doctrine_cache:
    providers:
        sylius_settings: "%sylius.cache%"
        sylius_rbac: "%sylius.cache%"

doctrine_phpcr:
    session:
        backend:
            type: doctrinedbal
            connection: default
            caches:
                meta: doctrine_cache.providers.phpcr_meta
                nodes: doctrine_cache.providers.phpcr_nodes
        workspace: default
    odm:
        auto_mapping: true
        auto_generate_proxy_classes: "%kernel.debug%"

jms_serializer:
    metadata:
        directories:
            sylius-core:
                namespace_prefix: "Sylius\\Component\\Core"
                path: "@SyliusCoreBundle/Resources/config/serializer"

knp_gaufrette:
    adapters:
        sylius_image:
            local:
                directory: "%kernel.root_dir%/../web/media/image"
                create: true
    filesystems:
        sylius_image:
            adapter: "%sylius.uploader.filesystem%"

knp_snappy:
    pdf:
        enabled: true
        binary: "%wkhtmltopdf.bin_path%"
        options: []
    image:
        enabled: true
        binary: "%wkhtmltoimage.bin_path%"
        options: []

liip_imagine:
    loaders:
        default:
            filesystem:
                data_root: "%kernel.root_dir%/../web/media/image"
    filter_sets:
        sylius_small:
            filters:
                thumbnail: { size: [120, 90], mode: outbound }
        sylius_medium:
            filters:
                thumbnail: { size: [240, 180], mode: outbound }
        sylius_large:
            filters:
                thumbnail: { size: [640, 480], mode: outbound }

payum:
    storages:
        "%sylius.model.order.class%": { doctrine: orm }
        "%sylius.model.payment.class%": { doctrine: orm }

    security:
        token_storage:
            Sylius\Bundle\PayumBundle\Model\PaymentSecurityToken: { doctrine: orm }

    dynamic_gateways:
        config_storage:
            Sylius\Bundle\PayumBundle\Model\GatewayConfig: { doctrine: orm }

    gateways:
        offline:
            factory: offline
        cash_on_delivery:
            factory: offline

sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.block.service.text: ~

stof_doctrine_extensions:
    default_locale: "%locale%"
    orm:
        default:
            tree: true
            sluggable: true
            timestampable: true
            loggable: true
            sortable: true

twig:
    debug: "%kernel.debug%"
    strict_variables: "%kernel.debug%"
    exception_controller: "FOS\\RestBundle\\Controller\\ExceptionController::showAction"
    globals:
        shopperContext: "@sylius.context.shopper"

command_bus:
    command_name_resolver_strategy: named_message
