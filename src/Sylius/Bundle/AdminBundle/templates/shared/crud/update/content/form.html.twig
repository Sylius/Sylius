{% import '@SyliusAdmin/shared/helper/button.html.twig' as _button %}

{% set resource = hookable_metadata.context.resource %}
{% set configuration = hookable_metadata.context.configuration %}
{% set form = hookable_metadata.context.form %}

{% set route = configuration.vars.route|default(null) %}
{% set index_route = configuration.vars.index.route|default(null) %}
{% set index_url = path(
    index_route.name|default(_context.configuration.getRouteName('index')),
    index_route.parameters|default(route.parameters|default({}))
) %}

{% form_theme form '@SyliusAdmin/shared/form_theme.html.twig' %}

<div class="page-body">
    <div class="container-xl">
        {% block content %}
            {% set render_rest = hookable_metadata.configuration.render_rest %}

            {% if render_rest %}
                <div class="card">
                <div class="card-body">
            {% endif %}
            {{ form_start(form, {'action': path(configuration.vars.route.name|default(configuration.getRouteName('update')), configuration.vars.route.parameters|default({ 'id': resource.id })), 'attr': {'class': 'ui loadable form', 'novalidate': 'novalidate', 'id': form.vars.id}}) }}
            {% block form_content %}
                <input type="hidden" name="_method" value="PUT"/>
                {{ form_errors(form) }}
                {%- if form._token is defined %}{{ form_widget(form._token) }}{% endif %}

                {% hook 'form' with { form } %}
            {% endblock %}
            {{ form_end(form, {'render_rest': render_rest}) }}
            {% if render_rest %}
                </div>
                <div class="card-footer">
                    <div class="row align-items-center">
                        <div class="col"></div>
                        <div class="col-auto">
                            {{ _button.cancel({ text: 'sylius.ui.cancel'|trans, url: index_url, class: 'btn btn-ghost-secondary' }) }}
                            {{ _button.primary({ text: 'sylius.ui.update'|trans, type: 'submit', form: form.vars.id }) }}
                        </div>
                    </div>
                </div>
                </div>
            {% endif %}
        {% endblock %}
    </div>
</div>
